import { notFound } from "next/navigation";
import Image from "next/image";
import Header from "@/app/components/Header";
import Footer from "@/app/components/Footer";

const articles = [
  {
    slug: "german-cfs-night-a-social-celebration-of-german-cars",
    title: "German CFS Night: A Social Celebration of German Cars",
    heroImage: "/images/epic-golf.jpg",
    intro:
      "German Night brings car enthusiasts together to celebrate German engineering, showcase stunning rides, and compete for the coveted Best Car trophy.",
    date: "07/08/2025",
    author: "CFS Marshal",
    image: "/images/german-night-row.jpg",
    content:
      "This was a night to celebrate everything German, from precision engineering to autobahn-bred horsepower, and it couldn’t have been a better turnout for the Car Farm Social’s themed meet. While the focus was on marques like Porsche,  Mercedes, BMW, Volkswagen, and Audi, the event wasn’t exclusive to German machinery; as always, everyone was welcome to join the fun, no matter what badge sat on their bonnet. After all, CFS is all about community, appreciation, and the shared buzz of automotive passion.\n\nThe farm was alive with many kinds of cars, even a very old but clean Citroën H Van, if you can believe it! With rows of BMWs extending from early 90s classics to modern powerhouses and Porsches stretching across the yard, from modern M-series beasts to spotless old-school Golfs and Passats that have clearly been loved for decades. The VAG crowd showed up in full force, too: Golf, Audi, and even a few rare gems you don’t see often, like the Volkswagen Karmann Ghia. That car is stunning!{image3}The weather held on for us, and despite a few clouds, it was the perfect backdrop for these vehicles. As the evening went on, the “Best Car of the Night” trophy found its home with a stunning grey Porsche 911, a car that perfectly captured the spirit of the event: timeless style, raw power, and unmistakable German engineering. Still, there were countless worthy mentions such as the silver BMW E30, a classic Volkswagen Karmann Ghia, and even a few surprise guests from outside the theme, reminding everyone that at CFS, passion beats paperwork.\n\nA huge thank-you goes to the photographers who took part in the event. Don't forget to check out Rob Storm's selection of images of the night; he captured some stunning photos of the event. As always, a quick reminder: only our official photographer is permitted outside the venue, taking photos from the bank along the A483. Please be mindful of safety when leaving, no wheel spins or dangerous driving.{image4}Let’s keep CFS’s good name shining bright. The turnout was incredible, one of the best we’ve seen all year. The vibe was unbeatable, the behaviour spot-on, and the passion for cars absolutely unmatched. A massive thanks to everyone who attended and helped make German Night such a success. Until next time, thank you for another unforgettable Car Farm Social. Sunny and breezy, totally buzzing, and filled with that trademark enthusiasm that keeps us all coming back. Check out our socials for the latest updates, future themes, and a few special surprises coming soon.",
    category: "Event",
  },
  {
    slug: "final-2025-meet-pre-90s-classic-car-night",
    title: "Final 2025 Meet: Pre-90s Classic Car Night",
    heroImage: "/images/911-drive.jpg",
    intro:
      "The final CFS night of 2025 this week we celebrated everything pre-1990 with a trophy for the best car of the night",
    date: "11/09/2025",
    author: "CFS Marshal",
    image: "/images/fiesta-red.jpg",
    content:
      "This was a night to celebrate everything pre-1990; it was the perfect send-off to the final Car Farm Social meet. While the theme was centered on the pre-’90s era, it wasn’t strictly limited to classics; as always, there was a great mix of modern cars as well. These meets were never about rules, just about bringing people together, sharing a passion for cars, and having fun with a bit of nostalgic flair.\n\nThe night wrapped up with plenty of laughs, great conversations, and, of course, the “Best Car of the Night” trophy for one standout ride that stole the show. Despite the gloomy forecast, the event turned out to be a fantastic way to close out CFS. At first, it seemed like the rain might drive everyone away, but a few showers didn’t stop the crowd from showing up and making the most of it.\n\nWatching people scatter back to their cars, balancing cups of coffee, tea, and trays of chips, became part of the entertainment, and honestly, there’s nothing wrong with a few soggy chips when the vibes are this good.\n\n{image1}We saw an interesting selection of pre-90s classics and rare cars, from the beautiful Volkswagen Karmann Ghia, Mitsubishi Lancer EX Turbo, to the cleanest Ford Capri I've ever seen, seriously, it looked like it just came out of the factory! There were so many honorable mentions, a spectacular orange Volkswagen Type 3 Squareback, a cute blue Beetle, a  white Lotus Excel, but it was the 1985 Porsche 911 Carrera that stole the show!\n\nA big thank you to Gareth Johnson, professional photographer and official Car Farm Social photographer, who braved the volatile rainy weather to capture some incredible shots of CFS attendees leaving the farm. Since this was the final night of 2025, Gareth is providing these photos free of charge.{image2}Check our social media to see some epic shots. Remember that we only allow the official CFS photographer outside the venue, taking photos from the bank on the A483 road. We don't tolerate wheel spins and dangerous driving when joining the main road, so please refer to the CFS rules to ensure the safety of attendees and drivers on the road.\n\nBut that aside, we are thrilled with the buzz of atmosphere and behaviour of CFS attendees. We look forward to welcoming Gareth Johnson back to CFS next year.\n\nThank you all for attending CFS. It was perfect, slightly wet, but an unforgettable end to an incredible run of Car Farm Socials, proof that enthusiasm and community always outshine the weather. We hope to see you next year. In the meantime, check out our socials for special events!",
    category: "Event",
  },
  {
    slug: "explore-the-elan-valley-group-drive-out",
    title: "Explore the Elan Valley: Group Drive Out",
    heroImage: "/images/hero/volvo_drive.jpg",
    intro:
      "CFS hit the Elan Valley for a group drive around mid-Wales with twisty roads, epic scenery, and an unbeatable driving spirit all around.",
    date: "03/07/2025",
    author: "CFS Marshal",
    image: "/images/elan_valley.jpg",
    content:
      "This was a day built for exploring, a proper escape from the usual meet spot. The Elan Valley Drive Out was all about the open road, stunning views, and a convoy of car enthusiasts doing what they love most. The plan was simple: meet up early, grab a coffee, and head into mid-Wales for a day that blended driving, photography, and pure appreciation for the machines and the landscape.\n\nAll are welcome to CFS road-trip events, but we require a head count before the event. If you're interested in taking part in one of our drives, please let us know in advance on the Car Farm Social Facebook page.{image8}The morning started cool and overcast, typical Welsh weather, teasing rain but never quite committing. Spirits were high as everyone gathered at Llynclys farm before setting off on the trip. This is a standard practice for a CFS road trip. Elan Valley has been a regular destination for the CFS drive-out, and this is because of the spectacular views and the equally incredible roads that lead to them.{image5}We had quite the convoy of cars on the run, from classic hot hatches like the Peugeot 205 GTI and Ford Fiesta XR2 Mk1, to beautiful sports cars like the Porsche Boxster, BMW Z4, and even Japanese JDMs like the Mitsubishi Lancer Evo 8 and Subaru Impreza Wagon. We had cars from all over the world at this event.{image7}Garreg Ddu proved to be a fantastic backdrop for the CFS convoy, and we must give Gareth Johnson a big thank you for photographing the sight. The dams are a big draw for tourists to Elan Valley; there's history, countryside, and incredible views to be had, but for motor enthusiasts, it's the roads that take the spotlight.\n\nThe route planned out would take CFS through the dams and Elan Valley and west to the coast. This trip really shows off what mid Wales has to offer for motor enthusiasts. And of course it wouldn't be a road trip with a stop off for some food and an ice cream at the Honey Ice Cream shop in Tywyn.{image6}As the day wound down and the convoy rolled back toward town, everyone agreed it was one of the best outings of the year: a mix of great cars, good people, and unbeatable scenery. A huge thank you to everyone who came out to make the Elan Valley Drive Out such a success. Wet roads or not, it was everything a car day should be: relaxed, scenic, and unforgettable. We can’t wait for the next adventure.",
    category: "Event",
  },
  {
    slug: "jdm-battle-trophy-for-the-top-japanese-car",
    title: "JDM Battle: Trophy for the Top Japanese Car",
    heroImage: "/images/hero/subaru_front.jpg",
    intro:
      "Celebrate Japan’s finest automotive icons at the JDM Battle a high-energy showcase where enthusiasts compete for glory and the Top Japanese Car trophy.",
    date: "10/07/2025",
    author: "CFS Marshal",
    image: "/images/subarus.jpg",
    content:
      "This was a night to celebrate everything JDM, from modern monsters to Godzilla itself the Nissan GTR R34. We felt the unmistakable spirit of Japan’s car culture tonight. It couldn’t have been a better turnout for the Car Farm Social’s themed meet, which paid tribute to the legends that shaped a generation of enthusiasts.\n\nWhile the spotlight shone on icons like Nissan, Toyota, Honda, Mazda, and Mitsubishi, the night, as always, remained open to everyone who shares a passion for the open road. After all, CFS has always been about community, appreciation, and that shared buzz that keeps the automotive flame burning bright.{image11}From the early arrivals to the final line-up, the atmosphere was electric. The paddock was dominated by Nissan, showcasing Japan’s most iconic line of performance cars, the Skyline GT-R family. Enthusiasts were treated to a rare sight: an R32, R33, R34, and R35, a timeline of pure performance heritage. The “Car of the Night” trophy went to the stunning Bayside Blue Nissan GT-R R34, spotless, perfectly detailed, and a true embodiment of JDM excellence.{image9}This car didn’t just win the award; it stole the show.Elsewhere, the paddock was brimming with variety. A beautiful white Nissan Silvia S15  (a CFS regular)  drew plenty of attention, while a fleet of Mazda MX-5s from every generation gathered together, each one reflecting its owner’s unique touch. Seeing them all corralled in one spot summed up the spirit of the night: individuality, creativity, and a shared love for driving.\n\nAs the evening went on, the crowd was treated to an unforgettable sight: a '90s dream lineup of a white Toyota Supra, orange Honda S2000, and the bayside blue GT-R standing side by side. Once fierce rivals on the street and track, they now sat proudly together, representing an era that defined performance and passion.{image10}The weather held up, adding just the right amount of atmosphere to the buzzing energy across the farm. A huge thank-you goes to everyone who came out to celebrate the world of JDM with us. The turnout was fantastic, the behaviour was spot-on, and the enthusiasm was absolutely unmatched.\nThanks as always to our photographers. Be sure to check out the incredible shots from the night. Let’s keep CFS’s name shining strong and continue celebrating what unites us all: the cars, the people, and the passion that drives it all. Until next time, thank you for another unforgettable Car Farm Social.",
    category: "Event",
  },
  {
    slug: "red-kite-cafe-drive-out-adventure",
    title: "Red Kite Café Drive-Out Adventure",
    heroImage: "/images/red-kite-event/red-fords.jpg",
    intro:
      "Set out on a scenic drive to the Red Kite Café a relaxed adventure combining great roads, stunning countryside views, and good company over coffee and conversation.",
    date: "03/08/2025",
    author: "CFS Marshal",
    image: "/images/red-kite-event/red-kite-car-park.jpg",
    content:
      "The Red Kite Café Drive-Out Adventure was all about nipping into the Elan Valley, experiencing the fun corners and spectacular views the valley has to offer, before stopping off at the Red Kite Café for a bite to eat. The plan was simple enough: meet early, grab a coffee, and head out from the Red Kite Café Bar and Grill for a day’s run through the heart of Wales.\n\nThis wasn’t just another Sunday outing; it was a proper CFS road trip, complete with a fleet of cars that would make any petrolhead grin. Among the lineup, there was no missing the pair of red classics, the Ford Fiesta Mk1 XR2 and the Ford Escort XR3i, perfectly suited to the Red Kite name and setting.{image12}These two stood out like icons from another era, their punchy styling and unmistakable color popping against the green Welsh countryside. Alongside them, a Subaru Impreza Wagon and Mitsubishi Lancer Evo 8 brought some rally-bred spirit to the convoy, fitting, considering the route would later brush close to the roads used in Rali Ceredigion.\n\nThe Porsche Boxster, BMW Z4, and Jaguar F-Type added a dose of modern performance and sleek lines, while the Fiat 500 and Abarth 500 brought compact Italian charm into the mix. The Peugeot 205 GTI, Mazda MX-5, Mini Cooper, and a clean BMW 318i Touring M-Sport (E34) rounded out the group, a truly international collection of driver’s cars.{image13}The weather, as always in Wales, had other ideas. The morning started with that familiar misty drizzle, and while it never quite poured, it certainly made the tarmac interesting. As per usual, the road trip began with a meeting at Llynclys Farm. This is common practice as we do a head count before setting off.\n\nStill, spirits were high, and as the convoy climbed toward Elan Valley, the landscape opened up into sweeping views and twisting roads that make this route such a favorite. For anyone who loves driving, Elan never disappoints: those ribbons of road, framed by reservoirs and rolling hills, are about as close to perfection as it gets.{image14}After the run, everyone regrouped back at the Red Kite Café Bar and Grill, the perfect pit stop to warm up, grab a bite, and share stories from the day. The café has become something of a hub for local and visiting car enthusiasts. For those who haven’t yet, the Red Kite Café Bar and Grill is well worth a visit, not just for the food and the views, but for the atmosphere. And if you want to relive some of the action, check out the Rali Ceredigion photos now up on the café’s Facebook page.\n\nAs the day drew to a close and the convoy rolled home, there was that familiar post-drive buzz, the mix of satisfaction, laughter, and a touch of tiredness that marks a proper road trip done right. The Red Kite Café Drive-Out had everything a car day should: great roads, great people, and the kind of memories that stick long after the engines go quiet.",
    category: "Event",
  },
];

//helper function to render images within content
function renderContent(content, imageMap) {
  const parts = content.split(/(\{image\d+\})/g);

  return parts.map((part, index) => {
    const match = part.match(/\{(image\d+)\}/);
    if (match) {
      const key = match[1];
      const src = imageMap[key];
      if (src) {
        return (
          <div
            key={index}
            className="relative w-full aspect-[16/9] sm:aspect-[4/3] md:aspect-[16/9] overflow-hidden my-8"
          >
            <Image
              src={src}
              alt={key}
              fill
              className="object-cover"
              sizes="(max-width: 768px) 100vw, 80vw"
              priority
            />
          </div>
        );
      }
    }
    return (
      <p
        key={index}
        className="text-base sm:text-lg md:text-xl text-slate-700 whitespace-pre-wrap leading-relaxed"
      >
        {part}
      </p>
    );
  });
}

export default function Page({ params }) {
  //grab the slug from the url
  const { slug } = params;

  //find the matching article
  const article = articles.find((a) => a.slug === slug);

  //if no article is found trigger Next.js 404
  if (!article) notFound();

  const imageMap = {
    image1: "/images/vw-karmann-ghia.jpg",
    image2: "/images/205-leaving.jpg",
    image3: "/images/vw-karmann-ghia-2.jpg",
    image4: "/images/german-night-row-3.jpg",
    image5: "/images/drive_out_2.jpg",
    image6: "/images/drive_out_abarth.jpg",
    image7: "/images/elan-valley-convoy-bridge.jpg",
    image8: "/images/drive_out_ford.jpg",
    image9: "/images/gtr-front.jpg",
    image10: "/images/s2000.jpg",
    image11: "/images/R34.jpg",
    image12: "/images/red-kite-event/red-Fords-2.jpg",
    image13: "/images/red-kite-event/subaru-hero.jpg",
    image14: "/images/red-kite-event/mx5-leaving.jpg",
  };

  return (
    <div className="flex flex-col min-h-screen">
      {/*hero image */}
      <Header />
      <div className="relative w-full aspect-[16/9] sm:aspect-[4/3] md:aspect-[21/9]">
        <Image
          src={article.heroImage}
          alt={article.title}
          fill
          className="object-cover"
          priority
          sizes="100vw"
        />
        <div className="absolute inset-0 flex items-end justify-center pb-10 sm:pb-16 md:pb-24 bg-gradient-to-t from-slate-900/90 via-slate-900/30 to-transparent">
          <h1 className="text-2xl leading-tight sm:text-2xl md:text-3xl lg:text-7xl font-black text-white drop-shadow-2xl lg:max-w-4xl md:max-w-2xl sm:max-w-2xl max-w-md text-center md:text-left">
            {article.title}
          </h1>
        </div>
      </div>

      {/* article content */}
      <div className="flex flex-col items-center pt-10 sm:px-6 md:px-0 w-full pb-20">
        {/* Heading centered */}
        <h3 className="text-lg sm:text-2xl md:text-3xl font-medium text-center md:text-left max-w-4xl text-slate-800">
          {article.intro}
        </h3>

        {/* article date and author */}
        <div className="max-w-4xl w-full mt-4 text-center md:text-left text-slate-600 text-sm sm:text-base">
          <p>Written by {article.author}</p>
          <p>Event Date: {article.date}</p>
        </div>

        {/*article first image */}
        <div className="relative w-full max-w-4xl aspect-[16/9] overflow-hidden mt-8 mb-5">
          <Image
            src={article.image}
            alt={article.image}
            fill
            priority
            sizes="(max-width: 768px) 100vw, 80vw"
            className="object-cover"
          />
        </div>

        {/* main content */}
        <div className="max-w-4xl w-full space-y-8 text-left text-slate-700 px-2 sm:px-4 md:px-0">
          {renderContent(article.content, imageMap)}
        </div>
      </div>

      <Footer />
    </div>
  );
}
